# 📝 GitHub Projects TUI マネジメントツール 設計書

## 1. 概要 (Overview)

| 項目               | 詳細                                                                                                                                                                                                                              |
| :----------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **プロジェクト名** | GitHub Projects TUI マネジメントツール                                                                                                                                                                                            |
| **開発目的**       | GitHub Projects（カンバン、テーブル、ロードマップ）をターミナル上で操作するための TUI (Text-based User Interface) アプリケーション。マウス操作を廃し、Vim風のキーバインディングで**高速かつ効率的なプロジェクト管理**を実現する。 |
| **対象ユーザー**   | GitHub Projects を利用する開発者、エンジニア、プロダクトマネージャー。                                                                                                                                                            |

---

## 2. スコープと主要機能 (Scope & Features)

### 2.1. 必須機能（MVP：Minimum Viable Product）

1.  **マルチビュー機能:** 以下の3つのビューをサポートし、キーボードで切り替え可能とする。
    - **カンバンビュー (Board View)**
    - **テーブルビュー (Table View)**
    - **ロードマップビュー (Roadmap View)**
2.  **Vim風操作:** 全ての操作をキーボードショートカットで行い、`j`, `k`, `h`, `l` などの Vim コマンド体系を採用する。
3.  **高速フィルタリング:** ラベル、担当者、Issueの状態などに基づいて、カンバンとテーブルを迅速にフィルタリングできる機能 (`/` で開始)。
4.  **Issue操作:** 選択した Issue のステータス変更（列移動）および担当者割り当て（アサイン）。

### 2.2. キラー機能

- **進捗の可視化:** ロードマップビューにて、イテレーション単位のタスク配置や進捗をテキストベースのグラフで表示する。
- **高速な編集:** 選択中の Issue のタイトルや説明をインラインで編集できるモード（Vimの挿入モードに近い）。

---

## 3. 技術スタック (Technology Stack)

| カテゴリ               | 採用技術                       | 役割                                                                             |
| :--------------------- | :----------------------------- | :------------------------------------------------------------------------------- |
| **開発言語**           | **Go (Golang)**                | アプリケーションのコアロジックと高速な処理、単一バイナリ配布。                   |
| **TUI フレームワーク** | **Bubbletea**                  | TUI の描画と状態管理（Elm アーキテクチャ）。                                     |
| **TUI スタイリング**   | **Lipgloss** (想定)            | TUI の配色、レイアウト、コンポーネントの装飾。                                   |
| **データ連携**         | **`gh` コマンド** (GitHub CLI) | **データ取得と認証フローの管理**。Goから `gh` を呼び出し、JSON出力をパースする。 |
| **データパース**       | `encoding/json` (Go 標準)      | `gh` コマンドから受け取った JSON データの構造体へのマッピング。                  |

---

## 4. アーキテクチャとデータフロー

### 4.1. アーキテクチャパターン

- **Bubbletea Model-Update-View (MUV):** アプリケーションの状態を一元管理し、ユーザー入力に応じて状態（`Model`）を更新し、その結果を画面（`View`）に描画する。

### 4.2. データ取得フロー

1.  **認証:** ユーザーは事前に `gh auth login` を実行済みであること（TUIツールは認証を実装しない）。
2.  **コマンド実行:** TUI ツール起動時、Go の `os/exec` パッケージなどを用いて、**`gh project view [project-id] --json`** のようなコマンドを実行する。
3.  **JSON 取得:** `gh` コマンドからプロジェクトデータ（Issue、フィールド、列など）を JSON 形式で標準出力から取得する。
4.  **パースと格納:** 取得した JSON を Go の共通構造体へパースし、Bubbletea のルート `Model` に格納する。

---

## 5. ユーザーインターフェース (UI) 設計

### 5.1. 画面構成

画面は**ヘッダー**、**メインビュー**（切り替え可能）、**フッター**の3セクションで構成。

- **ヘッダー:** プロジェクト名、現在のビューモード、アクティブなフィルター表示。
- **フッター:** 現在のモード表示、主要な Vim 風ショートカットキーのヒント。

### 5.2. マルチビュー詳細

| ビューモード                  | 役割                         | 提示情報の特徴                                                                                                                                   |
| :---------------------------- | :--------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. カンバン (Board)**       | ステータスに基づくフロー管理 | 列（ステータス）ごとに Issue カードを配置。カード内に**担当者、ラベル**を簡潔に表示。                                                            |
| **2. テーブル (Table)**       | 詳細情報の比較とソート       | Issue の全フィールド（作成日、更新日、見積もりなど）を**行と列**で一覧表示。ゆくゆくは、カラムの追加はユーザー側のオプションでできるようにしたい |
| **3. ロードマップ (Roadmap)** | イテレーション/期日管理      | **期間軸**（スプリント、月など）に対し、タスクを**ガントチャート形式**で配置表示。                                                               |

---

### 5.3 モック

- docs/moc/github-projects-tui-mock.tsx
- 上記にtsx形式であるがモックを作成したので、これをgoで表現する

## 6. 操作設計（Vim キーバインディング）

### 6.1. 操作モード

- **ノーマルモード (デフォルト):** 移動、アクション実行、ビュー切り替え。
- **フィルタリングモード:** 検索クエリ入力（`/` で開始）。
- **編集モード:** テキスト入力（`i` や `Enter` で開始）。

### 6.2. 主要ショートカット（ノーマルモード）

| 操作カテゴリ       | アクション                     | キー                                 |
| :----------------- | :----------------------------- | :----------------------------------- |
| **基本移動**       | 上/下移動                      | `k` / `j`                            |
| **ステータス変更** | 左/右の列へ移動                | `h` / `l`                            |
| **ビュー切り替え** | カンバン/テーブル/ロードマップ/設定 | `1` or `b` / `2` or `t` / `3` or `r` / `4` |
| **編集**           | 編集モードへ移行               | `i` / `Enter`                        |
| **フィルタ**       | フィルタリングモードへ移行     | `/`                                  |
| **割り当て**       | 担当者（Assignee）の割り当て   | `a`                                  |
| **終了**           | アプリケーションを終了         | `q` / `Ctrl+c`                       |

### 6.3. 起動時デフォルト（Project/Owner）

- **設定ビュー**（キー `4`）で `project` と `owner` のデフォルト値を保存できます。
- 設定ファイル保存先（Linux）: `~/.config/project-hub/projects-tui.json`。
- 起動時の優先順位は **CLI 引数 > 保存済み設定** です。
- 設定ファイルが壊れている場合は警告を出し、処理は継続します。
